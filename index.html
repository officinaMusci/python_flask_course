<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Python Course</title>

        <link rel="stylesheet" href="dist/reset.css">
        <link rel="stylesheet" href="dist/reveal.css">
        <link rel="stylesheet" href="dist/theme/black.css">

        <style>
            body {
                cursor: url(media/cursor.png), auto;
            }
            a {
                font-size: 15px;
                margin: auto 0 0 auto;
            }
            li {
                font-size: 20px;
                margin-bottom: 20px;
            }
            .container {
                display: flex;
            }
            .col {
                flex: 1;
            }

            .column-list {
                columns: 100px;
            }
        </style>

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/monokai.css">
    </head>

    <body>
        <div class="reveal">
            <div class="slides">

        <section>

            <section>
                <div class="container">
                    <div class="col">
                        <img src="./media/logo-nomades.png" alt="" width=150 height=150>
                    </div>
                    <div class="col">
                        <img src="./media/logo-python.png" alt="" width=150 height=150>
                    </div>
                </div>
                <h3 class="r-fit-text">COURS PYTHON AVANCé</h3>
                <h3 class="r-fit-text">Nomades Advanced Technologies</h3>
                <h3 class="r-fit-text">Automne 2021</h3>
            </section>


            <section>
                <div class="container">
                    <!-- <h3 class="r-fit-text">Sergey Platonov</h3> -->
                    <div class="col">
                        <img src="./media/me.jpg" alt="" width=350>
                        <h3>Sergey Platonov</h3>
                    </div>
                    <div class="col">
                        <ul>
                            <li>Etudiant 3ème année HEPIA</li>
                            <li>Ingénierie IT - Logiciels et Systèmes Complexes</li>
                            <li>Expérience en Python: <strong>5 ans</strong>
                                <ul>
                                    <li>HEPIA - langage de choix pour projets</li>
                                    <li>Projets personnels</li>
                                    <li>Pictet Group - solo projet R&D - 9 mois</li>
                                    <li>CCHE Architects - solo projet R&D - 1 année (en cours)</li>
                                    <li>3ème année supervision projets IT à la Junior Entreprise HEPIA</li>
                                </ul>
                            </li>
                            <li>Intérêts
                                <ul>
                                    <li>Data Science</li>
                                    <li>Computer Vision</li>
                                    <li>Signal Processing</li>
                                    <li>Linear Programming (optimisation)</li>
                                    <li>Algorithmes Génétiques</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>


            <section>
                <h3>Les buts de ce cours</h3>
                <ul>
                    <li>Parcourir ensemble les bases du langage Python3</li>
                    <li>Apprendre à reflechir comme un dev Python</li>
                    <li>Apprendre à structurer le code</li>
                    <li>Prendre des bonnes habitudes lors du codage</li>
                    <li>Concretiser les connaissances avec des exercices/projets</li>
                </ul>
            </section>


            <section>
                <h3>quelques infos pratiques:</h3>
                <ul>
                    <li>Appuyez sur 'O' pour ouvrir/fermer une vue d'ensemble sur tout le cours</li>
                    <li><strong>Télécharger le cours:</strong> git clone https://github.com/maganoegi/nomades_python_autumn_2021_public.git</li>
                    <li><strong>Mettre à jour:</strong> git pull origin master</li>
                </ul>
            </section>


            <section>
                <h3 class="r-fit-text">Let's go learn Python</h3>
            </section>

        </section>


        <section>

            <section>
                <p>A quoi peut bien servir Python?</p>
            </section>


            <section>
                <h3>Python peut être utilisé pour:</h3>
                <ul>
                    <li>Serveur Back End</li>
                    <li>Interfaçage avec d'autres logiciels, permettant construction et intégration des systèmes complexes</li>
                    <li>Communication avec toutes types de bases de données</li>
                    <li>Traîtement de Big Data</li>
                    <li>Machine Learning</li>
                    <li>Systèmes Embarqués</li>
                    <li>en vrai... pour tout...</li>
                </ul>

                <h3 class="r-fit-text">comment cette flexibilité est possible?</h3>

            </section>


            <section>
                <h3 class="r-fit-text">Python est un langage semi-interprété - <a href="https://towardsdatascience.com/how-does-python-work-6f21fd197888">source</a></h3>

                <img src="./media/semii.jpg" alt="">
            </section>


            <section>
                <h3 class="r-fit-text">comment marche-t-elle, cette compilation?</h3>
                <img src="./media/semii2.png" alt="">
                <ul>
                    <li>le bytecode est stocké dans __pycache__/</li>
                    <li>cette "precompilation" est la raison pour laquelle Python a la reputation d'être "lent"</li>
                </ul>
                <!-- <p>le bytecode est stocké dans __pycache__/</p>
                <p>cette "precompilation" est la raison pour laquelle Python a la reputation d'être "lent"</p> -->

            </section>

        </section>


        <section>

            <section>

                <p>Environnements de travail</p>
            </section>


            <section>

                <p>IDE vs Editeurs de texte</p>
                <div class="container">
                    <div class="col">
                        <p><small>IDE - Integrated Development Environment</small></p>
                        <ul>
                            <li>Plus facile pour débuter</li>
                            <li>Tout optimisé pour developper</li>
                            <li>Necessite de l'apprentissage</li>
                            <li>Debuggage peut être plus complex</li>
                            <li>Trop de soutien - dépendance</li>
                        </ul>
                    </div>
                    <div class="col">
                        <p><small>Editeur de texte</small></p>
                        <ul>
                            <li>Facile à mettre en place</li>
                            <li>Plus legers, flexibles</li>
                            <li>Gestion de packages manuelle</li>
                            <li>Prototypage plus façile</li>
                            <li>Force à apprendre le syntaxe</li>
                        </ul>
                    </div>
                </div>
            </section>


            <section>

                <p>IDE et Text Editor Examples</p>

                <div class="container">
                    <div class="col">
                        <p><small>IDE</small></p>
                        <ul>
                            <li>PyCharm</li>
                            <li>Jupyter Notebook</li>
                        </ul>
                    </div>
                    <div class="col">
                        <p><small>Editeur de Texte</small></p>
                        <ul>
                            <li>Visual Studio Code (VSCode)</li>
                            <li>Sublime Text</li>
                            <li>Atom</li>
                            <li>Vim</li>
                        </ul>
                    </div>
                </div>
            </section>


            <section>

                <p>Problèmes fréquents</p>
                <ul>
                    <li>Même Projet - versions Python différentes</li>
                    <li>Même Projet - versions packages différentes</li>
                    <li>Packages intallés globalement - lourd</li>
                </ul>
                <p>Nous allons utiliser Anaconda - toolkit parfait pour début</p>
                <ul>
                    <li>gestion packages</li>
                    <li>gestion environnements</li>
                    <li>format unique pour ce cours</li>
                </ul>
            </section>


            <section>

                <p>Anaconda Setup</p>
                <img src="./media/anaconda.jpg" alt="">
            </section>


            <section>

                <p>Project Setup</p>

                <img src="./media/projsetup.jpg" alt="">
            </section>


            <section>

                <p>Project Setup</p>

                <div class="r-stack">
                    <div class="fragment fade-in-then-out">
                        <p>Navigation interne (cd - cd .. - ls)</p>
                        <img src="./media/condaterm1.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>Lister tous les environnements</p>
                        <img src="./media/condaterm2.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>Créer nouveau env</p>
                        <img src="./media/condaterm3.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>Activer un env</p>
                        <img src="./media/condaterm4.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>Lister tous les packages du env</p>
                        <img src="./media/condaterm5.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>tester Python</p>
                        <img src="./media/condaterm6.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>deactiver le env courant</p>
                        <img src="./media/condaterm7.png" alt="">
                    </div>

                    <div class="fragment fade-in-then-out">
                        <p>Workflow</p>
                        <img src="./media/workflow.jpg" alt="" width="800px">
                    </div>

                    <div class="fragment fade-in">
                        <p>VSCode plugins</p>
                        <img src="./media/vscodesetup.jpg" alt="" width="400px">
                    </div>
                </div>

            </section>

        </section>


        <section>

            <section>

                <p>Semantique</p>

            </section>


            <section>
            <h3>En Python, il n'y a pas d'accolades</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        
                # Pas d'accolades comme en JavaScript
                # A la place - un DOUBLE POINT avec INDENTATION
                def incrementer_de_1(x):
                    x += 1
                    return x
        
                    </code></pre>
            </section>


            <section>
            <h3>En Python, tout est un objet</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        
                x = 10
                type(x)
                &gt;&gt;&gt; "int"

                def func(x):
                    return x
                type(func)
                &gt;&gt;&gt; "class"

                class MyClass:
                    pass
                type(MyClass)
                &gt;&gt;&gt; "type"


        
                    </code></pre>
            </section>


            <section>
            <h3>Ce qui rend Python tres flexible</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        
                def func(x):
                    return x

                y = func
                y(10)
                &gt;&gt;&gt; "10"

                # donc notre fonction est considerée comme 
                # un "first-class citizen"
                # nous ouvrant le chemin pour plein de choses utiles
        
                    </code></pre>
            </section>


            <section>

                <img width=700 src="https://miro.medium.com/max/1400/1*oErPCXv1PFcuuizXqGEEbw.png" alt="">
                <p><a href="https://medium.com/@meghamohan/mutable-and-immutable-side-of-python-c2145cf72747#id_token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImMzMTA0YzY4OGMxNWU2YjhlNThlNjdhMzI4NzgwOTUyYjIxNzQwMTciLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2MzIwOTA0MjQsImF1ZCI6IjIxNjI5NjAzNTgzNC1rMWs2cWUwNjBzMnRwMmEyamFtNGxqZGNtczAwc3R0Zy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjExMDg3ODY3Nzg3MTU5NzU2MzU5NSIsImVtYWlsIjoicGxhdHNlcmc5NEB5YWhvby5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXpwIjoiMjE2Mjk2MDM1ODM0LWsxazZxZTA2MHMydHAyYTJqYW00bGpkY21zMDBzdHRnLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiaWF0IjoxNjMyMDkwNzI0LCJleHAiOjE2MzIwOTQzMjQsImp0aSI6IjNkNmRmYTkwZDUyY2FjYzdkNTY1MTJkZjMwNjEwYjc2OTczMGJmMGUifQ.vBeFNhDDGvp0LcGEpudiHPU7KzgJgSFh7JxOBq93HCo7MbQVPF2I9i18FBe7XY1lR-Z6IfwOOPwSXcqCrpt_jWKLgUlTbZC_Qm2rxMYTjKxA4olXjiYg4tRJ5D2Pky2kO1E46_FNpkeOYSFKHddV8sNpzAmr5XA4Ep2LQDEMlg22rk-Nm7_Wh3_TxiIcOg5NB8wVk928dR2JgQ6FpXZzrU6Lw2Ar7hJLUtNDVHZ4yfx-En1p2awCB6aH46Y1h-dOfCNdvajex9sckXx5Wru-px0Bn26vqE_h9CYRy143pVec4jSV1AyCDP_-rJghTFtlSUO0KDm72x1WHQdQxSJysQ">source</a></p>
            </section>


            <section>

                <h3>par contre, il faut faire gaffe avec cette flexibilité!</h3>

                <ul>
                    <li>les objets sont de base <strong>MUTABLES</strong>
                        <ul>
                            <li>debugger avec id() et type()</li>
                        </ul>
                    </li>
                    <li>les types sont inferés lors de l'execution
                        <ul>
                            <li>source de bug ENORME</li>
                        </ul>
                    </li>
                </ul>

                <p>nous allons parler des bonnes pratiques en cours de route ;)</p>
            </section>


            <section>
            <h3>Il existe 2 types de commentaires...</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        

                # commentaires "de ligne"

                """
                commentaires
                en
                bloc
                """
        
                    </code></pre>
            </section>


            <section>
            <h3>exemples</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-14|16-29'>
        
        

                def weird_function(y):
                    """quick explanation on what the function does.
    
                    A more elaborate explanation on what the function
                    does. Here the algorithms can be explained, as 
                    well as other details. This type of comment 
                    is called a DOCSTRING.

                    ARGS:
                        what arguments and types to expect

                    RETURNS:
                        what type and what that value represents
                    """

                    # line comment to explain this step, 
                    # if it's not clear
                    x = y + 1 

                    # generally, AVOID OVER-COMMENTING:
                    # a variable/function name must speak for itself

                    return "".join(map(lambda x : tw.indent(x, INDENT), [
                        SECTION_OPEN,
                        self.contents,
                        SECTION_CLOSE
                    ]))


        
                    </code></pre>
            </section>


            <section>
                <p>Fonctions et Methodes</p>
            </section>


            <section>
            <h3>exemples</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='4-18|24-36|42-53|60-65|76-86|98-106'>
        
        
                # ==================================================



                # en Mathématiques:     f(x) = x + 1
                # en Python:            f(x) 

                def f(x):
                    """mot clé DEF designe une fonction. 
                    Incremente de 1. 
                    """
                    x += 1
                    return x

                # appel de fonction avec ARGUMENT POSITIONNEL:
                &gt;&gt;&gt; output = f(1)
                2







                def f(x):
                    """mot clé DEF designe une fonction. 
                    Incremente de 1. 
                    """
                    x += 1
                    return x

                # appel de fonction sans argument réquis:
                &gt;&gt;&gt; output = f()
                "TypeError: func() missing 1 required" 
                "positional argument: x"







                def f(x):
                    """mot clé DEF designe une fonction. 
                    Incremente de 1. 
                    """
                    x += 1
                    return x

                # appel de fonction avec ARGUMENT NOMME:
                &gt;&gt;&gt; output = f(x=2)
                3








                # fonction LAMBDA, sur une ligne
                &gt;&gt;&gt; l = lambda x : x + 1
                &gt;&gt;&gt; l(1)
                2











                # fonction avec nombre variable d'arguments
                def sum_all(*args):
                    result = 0
                    for arg in args:
                        result += arg
    
                    return result
    
                &gt;&gt;&gt; output = sum_all(1, 2, 3, 4, 5, 6, 7, 8, 9)
                45













                # fonction avec somme variable des variables nommées
                def format_greeting(**kwargs):
                    for key, value in kwargs.items():
                        print("My {0} is {1}".format(key, value))

                &gt;&gt;&gt; format_greeting(name="Sergey")
                "My name is Sergey"







                # ==================================================




        
                    </code></pre>
            </section>


            <section>
                <h3>Variables</h3>
                <div class="container">
                    <div class="col">
                        <ul>
                            <li>Nous permet de stocker des données de types différents</li>
                            <li>n'ont pas de type - contiennent reference vers memoire</li>
                            <li>doivent être affectées pour exister</li>
                            <li>décision sur contenu au run-time</li>
                        </ul>
                    </div>
                    <div class="col">
                        <ul>
                            <li>notations et opérations:
                                <ul>
                                    <li>x += 1</li>
                                    <li>x -= 1</li>
                                    <li>x *= 1</li>
                                    <li>x **= 1</li>
                                    <li>x /= 1</li>
                                    <li>x //= 1</li>
                                    <li>x %= 1</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <h3 class="r-fit-text">Ceci nous permet d'avoir du typage dynamique</h3>

            </section>


            <section>

                <h3 class="r-fit-text">Les variables n'ont pas de type - il faut les voir comme un pointeur générique - <a href="https://towardsdatascience.com/dynamic-typing-in-python-307f7c22b24e">source</a></h3>

                <div class="r-stack">
                    <img class="fragment" src="./media/dynamicT1.jpg" alt="">
                    <img class="fragment" src="./media/dynamicT2.jpg" alt="">
                    <img class="fragment" src="./media/dynamicT3.jpg" alt="">
                    <img class="fragment" src="./media/dynamicT4.jpg" alt="">
                </div>
            </section>


            <section>

                <p>Cependant...</p>
                <p><small>les exemples d'avant étaient de type IMMUTABLE</small></p>
                <p><small>le comportement des types MUTABLES est DIFFERENT !!</small><a href="https://link.medium.com/LJHu58rPGjb">source</a></p>
                <p><small>plus besoin de créer un nouveau espace-mémoire - garde même pointeurs</small></p>
                <div class="container">
                    <div class="col">
                        <ul>Mutables
                            <li>list</li>
                            <li>dict</li>
                            <li>set</li>
                            <li>bytearray</li>
                            <li>custom class</li>
                        </ul>
                    </div>
                    <div class="col">
                        <ul>Immutables
                            <li>numerical types</li>
                            <li>string</li>
                            <li>tuple</li>
                            <li>frozen set</li>
                            <li>bytes</li>
                        </ul>
                    </div>
                </div>
            </section>


            <section>

                <h3 class="r-fit-text">toute une autre histoire pour les variables mutables.. - <a href="https://towardsdatascience.com/dynamic-typing-in-python-307f7c22b24e">source</a></h3>

                <div class="r-stack">
                    <img class="fragment" src="./media/dynamicT5.jpg" alt="">
                    <img class="fragment" src="./media/dynamicT6.jpg" alt="">
                    <img class="fragment" src="./media/dynamicT7.jpg" alt="">
                    <img class="fragment" src="./media/dynamicT8.jpg" alt="">
                </div>
            </section>


            <section>

                <h3>Duck Typing - <a href="https://link.medium.com/CuerPlhEGjb">source</a></h3>
                <p>"It's a duck if it walks like a duck and quacks like duck"</p>
                <p><small class="fragment">Typage dynamique est aussi rendu possible grace à "duck typing"</small></p>
                <p><small class="fragment">TOUT peut devenir TOUT tant qu'on suit la logique suivante:</small></p>

                <ul class="fragment">
                    <li>Pour utiliser une function -> besoin d'un canard</li>
                    <li>Pour être un canard -> faut cancaner et marcher (pas très exigeant...)</li>
                    <li>Du coup, faut implementer ces deux choses pour pouvoir participer.</li>
                    <li>(en "quelque sort" similaire aux interfaces en JAVA...)</li>
                </ul>

            </section>


            <section>
            <h3>exemple conceptuel</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-14|15-18|20-34'>
        
        
                class Duck:
                    def swim(self):
                        print("I can swim!")
    
                    def quack(self):
                        print("QUAAACK!")

                class RoboticDuck:
                    def swim(self):
                        print("I can swim, but I will break...")
    
                    def quack(self):
                        print("execute Q.U.A.A.A.C.K protocol !")

                class Fish:
                    def swim(self):
                        print("I can swim!!")


                def check_if_duck(animal):
                    animal.quack()
                    animal.swim()

                &gt;&gt;&gt; check_if_duck( Duck() )
                "QUAAACK!"
                "I can swim!"

                &gt;&gt;&gt; check_if_duck( RoboticDuck() )
                "execute Q.U.A.A.A.C.K protocol !"
                "I can swim, but I will break..."

                &gt;&gt;&gt; check_if_duck( Fish() )
                "AttributeError: 'Fish' object has no attribute 'quack'"
        
                    </code></pre>
            </section>


            <section>

                <p>Il existe deux types d'évaluation en Python:</p>
                <ul>
                    <li>strict (stricte)</li>
                    <li>lazy (paresseuse)</li>
                </ul>

                <p><small><strong>Stricte</strong> calcule immédiatement le résultat sans reflechir</small></p>
                <p><small><strong>Paresseuse</strong> calcule que s'il le faut...</small></p>

            </section>


            <section>
            <h3>strict vs lazy evaluation</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-3|4-12'>
        
        

                # evaluation stricte, rien d'intéressant...
                x = 0
                x += sum([1, 2])

                class DataBaseManager:
                    ...
                    # example de lazy eval ;) résultats en cache 
    
                    @property 
                    def all_user_accounts(self):
                        # do something insanely LONG and HORRIBLE...
                        return result



        
                    </code></pre>
            </section>

        </section>


        <section>

            <section>
                <p>Structure du langage</p>

            </section>


            <section>

                <p>Types numériques</p>
                <div class="container">
                    <div class="col">
                        <p>int</p>
                    </div>
                    <div class="col">
                        <p>long</p>
                    </div>
                    <div class="col">
                        <p>float</p>
                    </div>
                    <div class="col">
                        <p>complex</p>
                    </div>
                </div>
                <div class="container">
                    <div class="col">
                        <ul>
                            <li>x + y</li>
                            <li>x - y</li>
                            <li>x * y</li>
                            <li>x / y</li>
                            <li>x // y</li>
                            <li>-x</li>
                        </ul>
                    </div>
                    <div class="col">
                        <ul>
                            <li>abs(x)</li>
                            <li>int(x)</li>
                            <li>float(x)</li>
                            <li>complex(re, im)</li>
                            <li>c.conjugate()</li>
                            <li>pow(x, y)</li>
                            <li>x**y</li>
                        </ul>
                    </div>
                </div>
            </section>


            <section>
            <h3>conversion de type - Casting</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-16|31-38'>
        
        

                # conversion IMPLICITE
                &gt;&gt;&gt; x = 12 # int
                &gt;&gt;&gt; y = 1.0 # float

                &gt;&gt;&gt; type(x * y)
                float

                &gt;&gt;&gt; type(x % y)
                float

                # Pourquoi?

                &gt;&gt;&gt; type("Hello World" + x)
                TypeError
















                # conversion EXPLICITE
                &gt;&gt;&gt; x = 1.0
                &gt;&gt;&gt; y = int(x)
                &gt;&gt;&gt; type(y)
                int

                &gt;&gt;&gt; str(x)
                '1.0'











        
                    </code></pre>
            </section>


            <section>
            <h3>type string</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-3|5-7|9-11|13-18|20-28|30-40'>
        
        
                # Ceci est un string...
                &gt;&gt;&gt; hello = "Hello"
                &gt;&gt;&gt; world = 'World'

                # Strings peuvent subir des opérations...
                &gt;&gt;&gt; combined_string = hello + world
                "HelloWorld"

                # strings peuvent être formatées...
                &gt;&gt;&gt; formatted_string = f"{combined_string} misses a space..."
                "HelloWorld misses a space..."

                &gt;&gt;&gt; list_of_strings = [
                ...     "hello",    
                ...     "world"   
                ... ]
                &gt;&gt;&gt; " ".join(list_of_strings).upper()
                "hello world"

                # strings peuvent être considerées comme des listes...
                &gt;&gt;&gt; first_char = formatted_string[0]
                "H"

                &gt;&gt;&gt; len(first_char)
                1

                &gt;&gt;&gt; 'Python' in formatted_string
                False

                # ... mais ils ont aussi des methodes propres...
                &gt;&gt;&gt; combined_string.upper()
                'HELLOWORLD'

                &gt;&gt;&gt; combined_string.lower()
                'helloworld'

                &gt;&gt;&gt; "hello world         ".strip()
                "hello world"

                # les '' peuvent être utilisées à l'intérieur de ""
        
                    </code></pre>
            </section>


            <section>
            <h3>boolean et operateurs</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-11|13-23'>
        
        
                # valeur booléenne
                &gt;&gt;&gt; lower = 12 # variable de type immutable...
                &gt;&gt;&gt; higher = 13
                &gt;&gt;&gt; lower &lt; higher
                True

                &gt;&gt;&gt; lower &gt;= higher
                False

                &gt;&gt;&gt; 12 == 12.0 # comparaison par reference...
                True 

                &gt;&gt;&gt; x = True
                &gt;&gt;&gt; y = False

                &gt;&gt;&gt; x and y
                False

                &gt;&gt;&gt; x or y 
                True

                &gt;&gt;&gt; x ^ y # xor (or exclusif)
                True
        
                    </code></pre>
            </section>


            <section>

                <h3>Listes</h3>

                <ul>
                    <li>collection clé du langage</li>
                    <li>variable MUTABLE - ATTENTION BUGS</li>
                    <li>iterable</li>
                    <li>indexable</li>
                    <li>plein de modes d'exploitation, car important!</li>
                </ul>

                <p>Regardons les exemples pour commencer...</p>
            </section>


            <section>
            <h3>Listes - base</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-2|4-6|8-14|18-23|27-29|32-47'>
        
        
                # initialisons une liste...
                &gt;&gt;&gt; lst = []

                # ajoutons quelque chose...
                &gt;&gt;&gt; lst.append(12)
                [12]

                # et encore, mais de type different...
                &gt;&gt;&gt; lst.append("douze")
                [12, "douze"]

                # ATTENTION: ne faites jamais ça s'il vous plaît...
                # et S'IL FAUT le faire, utilisez les TUPLES:
                &gt;&gt;&gt; t = (12, "douze")



                # listes sont ITERABLES...
                # donc on peut les parcourir par valeur
                &gt;&gt;&gt; for value in lst:
                ...     print(value) 
                12
                "douze"



                # elles sont aussi indexables...
                &gt;&gt;&gt; lst[0]
                12


                # et on peut avoir des listes dans listes
                &gt;&gt;&gt; nested = [
                ...     ["uno", "dos", "tres"], 
                ...     ["eins", "zwei", "polizei"],
                ...     ["bonjour"]   
                ... ]

                &gt;&gt;&gt; silly_phrase = [
                ...     nested[2][0],
                ...     nested[0][1],
                ...     nested[1][2]
                ... ]

                &gt;&gt;&gt; " ".join(silly_phrase)
                "bonjour dos polizei"



                "=============="

        
                    </code></pre>
            </section>


            <section>
            <h3>Listes - avance</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-11|13-18|20-30|32-38|40-43|45-46|48-52|54-65'>
        
        
                # SLICING - lst[start : stop : step]
                &gt;&gt;&gt; lst = [1, 2, 3, 4, 5, 6, 7, 8]

                &gt;&gt;&gt; lst[:]
                [1, 2, 3, 4, 5, 6, 7, 8]

                &gt;&gt;&gt; lst[1:]
                [2, 3, 4, 5, 6, 7, 8]

                &gt;&gt;&gt; lst[::-1] # debut à la fin avec un pas négatif
                [8, 7, 6, 5, 4, 3, 2, 1]

                &gt;&gt;&gt; lst = "HWeolrllod"
                &gt;&gt;&gt; lst[::2] # pas de 2, commençant par index 0
                "Hello"

                &gt;&gt;&gt; lst[1::2] # pas de 2, commençant par index 1
                "World"

                # prendre le dernier et avant-dernier element
                # et additionner les deux
                &gt;&gt;&gt; lst = [1, 2, 3, 4, 5, 6, 7, 8]
                &gt;&gt;&gt; lst[-1] + lst[-2]
                15
                # recherche d'index...
                &gt;&gt;&gt; lst.index(3)
                2

                &gt;&gt;&gt; lst.index(15)
                ValueError

                # Comprehension des Listes
                # manière de composer des nouveaux listes
                # a partir des "règles" et boucles FOR imbriquées.

                # PLUS RAPIDE, "MEMORY SAFE", FACILE A LIRE
                &gt;&gt;&gt; lst = [0, 1, 2, 3, 4, 5, 6]
                &gt;&gt;&gt; lst_squared = [x**2 for x in lst]

                # Qu'est-ce qu'il se passe?

                # parcours de liste LST par valeur...
                &gt;&gt;&gt; lst_squared = [___ for x in lst]

                # accès a la variable x  dans le scope...
                &gt;&gt;&gt; lst_squared = [x___ for x in lst]

                # elevation de la variable (valeur de lst) en carré
                &gt;&gt;&gt; lst_squared = [x**2 for x in lst]

                # NOTE: les [] autour signifient qu'on construit une liste
                # et non une dictionnaire -&gt; ce serait alors des {}

                # Fonctions sur des listes...
                &gt;&gt;&gt; lst = [0, 1, 2, 4, 5, 6, 3]

                # tri
                &gt;&gt;&gt; sorted_list = sorted(lst)

                # reverse
                &gt;&gt;&gt; rev_list = reversed(lst)

                # la somme de tous les elements
                # ATTENTION: marche que pour objets avec + defini...
                &gt;&gt;&gt; total = sum(lst)




        
                    </code></pre>
            </section>


            <section>
            <h3>Flux d'execution</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-13|15-22|26-30|34-47|51-65|67-70 '>
        
        
                def scream_the_type(number):
                    this_type = type(number)
                    if this_type == int:
                        print("THIS IS AN INT!!!")
    
                    elif this_type == float:
                        print("THIS IS A FLOAT")

                    else:
                        print("This is some other type.... might be a string?")

                &gt;&gt;&gt; scream_the_type("this is not a number")
                "This is some other type.... might be a string?"

                &gt;&gt;&gt; x = 0
                &gt;&gt;&gt; result = []
                &gt;&gt;&gt; while x != 10:
                ...     result.append(x)
                ...     x += 1

                &gt;&gt;&gt; print(result)
                [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]



                # pattern que l'on trouve dans du code materiel...
                while True:
                    # do something
                    if stop_condition:
                        break



                # pattern que l'on trouve dans du code analytique...
                while condition:

                    if do_condition:
                        # do something

                    elif skip_condition:
                        continue

                    elif stop_condition:
                        break

                    else:
                        pass # do NOTHING



                # boucle FOR - (quand nombre iterations connu)...

                lst = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

                # parcourir une liste en longueur...
                for i in range(len(lst)):
                    print(lst[i])

                # range donne un ITERATEUR de 0 à 9 
                # mais vu que LIST est deja un ITERABLE... 

                # parcourir la liste par valeur...
                for value in lst:
                    print(value)


                # parcourir la liste avec indice et valeur...
                for i, value in enumerate(lst):
                    print(f"value {value} at index {i}")


        
                    </code></pre>
            </section>


            <section>
            <h3>exemple - calculatrice</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='44|45-47|1-11'>
        
        



                def ask_user_int(prompt):
                    result = None
                    while not result:
                        try:
                            result = int(input(prompt))

                        except:
                            print("Please provide an integer value")
                            continue
    
                    return result

                def ask_user_op(prompt):
                    result = None
                    while not result:
                        raw = input(prompt)
                        if raw in ["*", "//", "-", "+", "/", "%"]:
                            result = raw
                        else:
                            print("Please select from the following values: \
                                    * / // % + -")
                            continue

                    return result

                def select_operation(op_str):
                    if op_str == "*":
                        return lambda x, y : x * y

                    elif op_str == "/":
                        return lambda x, y : x / y

                    elif op_str == "//":
                        return lambda x, y : x // y

                    elif op_str == "-":
                        return lambda x, y : x - y

                    elif op_str == "+":
                        return lambda x, y : x + y

                    else:
                        return lambda x, y : x % y

                if __name__ == '__main__':
                    left = ask_user_int("First Number: ")
                    op_str = ask_user_op("Operation: ")
                    right = ask_user_int("Second Number: ")
    
                    operation = select_operation(op_str)

                    result = operation(left, right)

                    print(f"{left} {op_str} {right} = {result}")
        
                    </code></pre>
            </section>


            <section>
            <h3>Expression ternaire</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        
                # Expression "simple"...
                age = 37
                if age &gt;= 18:
                    print("la personne est majeure")
                else:
                    print("la personne est mineure")

                # expression ternaire...
                state = 'majeure' if age &gt;= 18 else 'mineure'
                print(f"la personne est {state}")

                # Permet de faire un test rapide sur 
                # une condition simple...

        
                    </code></pre>
            </section>

        </section>


        <section>

            <section>

                <p>Structures avancees</p>
            </section>


            <section>
            <h3>Tuples</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-8|10-21|23-35|37-43'>
        
        
                # Tuples sont des objets IMMUTABLES 
                # Donc Memory-safe et plus rapides
                &gt;&gt;&gt; film = ("Good Will Hunting", "Robin Williams", 
                        "Matt Damon", "Ben Affleck", 1997)

                # les tuples sont ITERABLES et INDEXABLES
                &gt;&gt;&gt; film[0]
                "Good Will Hunting"

                # ... peuvent etre decomposées dans variables separees
                name, actor1, actor2, actor3, year = film

                # mais aussi mettre les parties dans des lists..
                name, *actors, year = film

                # quand une valeur ne nous importe pas...
                name, *actors, _ = film

                # quand une fonction retourne plusieurs valeurs,
                # python les met dans un tuple.
                name, *actors, _ = get_random_film()

                # ====== TUPLES NOMMEES ======
                &gt;&gt;&gt; from collections import namedtuple
                &gt;&gt;&gt; Student = namedtuple("Student", [
                    "first_name",
                    "last_name",
                    "school"
                ])

                &gt;&gt;&gt; s1 = Student(
                    first_name="Sergey", 
                    last_name="Platonov",
                    school="Nomades"
                )

                # tuples nommes nous permettent d'avoir:
                    # liaisons clé - valeur (comme dictionnaires)
                    # indexation et itération (comme lists)
                    # champs (comme classes)
                    # immutabilité (comme tuples)

                # elles forment donc un type hyper versatil
        
                    </code></pre>
            </section>


            <section>
            <h3>Dictionnaires</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-11|13-18|20-30|32-38|40-51|53-61'>
        
        
                # dictionnaires dont des structures
                # de donnes avec les proprietés suivantes:
                    # jeux de clé-valeur
                    # garantie d'unicité de clés
                    # rapidité de lookup (voir hashtable)

                &gt;&gt;&gt; my_dict = {
                    "key_a" : "val_a",
                    "key_b" : "val_b",
                    "key_c" : "val_c",
                }

                # elles ne sont donc pas indexables ni iterables
                # comme les tuples nommes.
                # Leur but principal est d'assurer une valeur de clé
                # unique...
                &gt;&gt;&gt; my_dict["key_c"]
                "val_c"

                # ajouter un nouveau item unique...
                &gt;&gt;&gt; my_dict["key_x"] = "val_x"

                # ATTENTION:
                #   ajour d'élément avec le meme clé 
                #   va overrride l'élément
                &gt;&gt;&gt; my_dict["key_a"] = "another a value"

                # prendre tous les clés...
                &gt;&gt;&gt; my_dict.keys()
                dict_keys(["key_a", "key_b", "key_c"])

                # prendre tous les items...
                &gt;&gt;&gt; my_dict.items()
                dict_items([("key_a", "val_a"), (...), (...)])

                # prendre toutes les valeurs
                &gt;&gt;&gt; my_dict.values()
                dict_values([..., ..., ...])

                # les dictionaires peuvent être crées...
                &gt;&gt;&gt; my_dict = {
                    "key_a" : "val_a",
                }

                &gt;&gt;&gt; my_dict = dict([("key_a", "val_a")])

                &gt;&gt;&gt; my_dict = dict(key_a="val_a", ...)

                # mais aussi avec Dict Comprehensions...
                &gt;&gt;&gt; my_dict = {x : x**2 for x in (0, 1, 2, 3)}
                {0: 0, 1: 1, 2: 4, 3: 9}

                # parfois une valeur n'existe pas dans un dict...
                &gt;&gt;&gt; d = dict(a=1, b=2, c=3)
                &gt;&gt;&gt; d["d"]
                KeyError: 'd'

                # Il faut alors proposer une valeur par défaut.
                &gt;&gt;&gt; d = dict(a=1, b=2, c=3)
                &gt;&gt;&gt; d.get("d", "ma valeur par defaut")
                "ma valeur par defaut"

        
                    </code></pre>
            </section>


            <section>
            <h3>Iterateurs</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-14|20-27|29-40|42-54'>
        
        
                # pour des raisons de memoire et performance
                # certaines fonctions retournent des ITERATEURS...

                # appliquer my_func à chaque element dans la collection..
                &gt;&gt;&gt; map(my_func, [0, 1, 2, 3])
                map object

                # avoir un iterateur de 0 à 9...
                &gt;&gt;&gt; range(10)
                range object

                # filtrer les valeurs dans une collection...
                &gt;&gt;&gt; filter(lambda x : x % 2 == 0, [0, 1, 2, 3, 4, 5])
                filter object

                # Ces elements-là sont des iterateurs intermediaires
                # qui nous permettent de les utiliser par la suite
                #  et enchainer des operations...

                # Enchainement: 
                map(operation, iterator1, ..., iteratorN) -&gt; iterator

                &gt;&gt;&gt; r = reversed(0, 1, 2, 3, 4)
                &gt;&gt;&gt; m = map(pow, r, range(10))
                &gt;&gt;&gt; list(m)
                [1, 3, 4, 1, 0]


                # EXEMPLE:
                &gt;&gt;&gt; def myfunc(a, b):
                ...     return a + b

                &gt;&gt;&gt; m = map(myfunc, [0, 1, 2, 3])
                &gt;&gt;&gt; # PAS D'ERREUR!
                &gt;&gt;&gt; list(m)
                TypeError: missing 1 required positional argument 'b'

                # Donc on voit que MAP effectue uniquement les liens
                # en preparant le contenu à la sortie...
                # ceci est la definition d'un iterateur

                # Le mapping devient "concret", quand:
                &gt;&gt;&gt; list(m)
                # OU
                &gt;&gt;&gt; m.__next__()

                # Les itérateurs importants:
                map(func, *collections)
                reversed(collection)
                zip(*collections)
                filter(predicate, collection)

                # comme c'est des "recettes", on ne peut pas les
                # comparer directement... il faut de la logique en plus 

                # par contre, quand on parcours un objet MAP
                # on ne pourra plus l'utiliser...
                &gt;&gt;&gt; lst = [0, -1, -2, -3, -4]
                &gt;&gt;&gt; m = map(lambda x : abs(x), lst)
                &gt;&gt;&gt; list(m)
                [0, 1, 2, 3, 4]
                &gt;&gt;&gt; list(m)
                []

                # Pourquoi?
                # C'est parce que l'objet map est aussi un GENERATEUR.
                # L'optimisation lui permet de stocker les "recettes" de 
                # generation, mais on peut l'instantier qu'une fois.
                # NOTE: tout generateur est aussi un iterateur.



        
                    </code></pre>
            </section>


            <section>
            <h3>Generators</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-12|9-22|26-36|38-50'>
        
        
                # jusqu'à maintenant nous avons appellé les objets ayant ce
                # comportement les ITERATEURS. Plus etre plus specifique, ils
                # s'appellent des GENERATEURS et forment un sous-type des iterateurs.

                # ITERATEURS:
                    # implementent les methodes __iter__() et __next__()
                        # on peut donc les parcourir

                # GENERATEURS
                    # sont des iterateurs
                    # nous donnent le contrôle sur le mémoire
                        # grâce au mot-clé YIELD

                def my_generator(n):
                    for i in range(1, n, 2):
                        yield i**3

                &gt;&gt;&gt; for i in my_generator(10):
                ...     print(i)
                1
                27
                125
                343
                729

                # une autre manière de créer un generateur est avec une 
                # expression generatrice. Syntaxe est similaire à une 
                # comprehension de liste...
                &gt;&gt;&gt; gen = (i**3 for i in range(1, 10, 2))
                generator object

                &gt;&gt;&gt; list(gen)
                [1, 27, 125, 343, 729]

                &gt;&gt;&gt;list(gen)
                []

                # Quand nous utilisons une fonction pour declarer un generateur
                # nous reinitialisons ce dernier à chaque fois. # TODO length
                # Si on le fait avec une expression - il sera epuisé.

                &gt;&gt;&gt; next(my_generator)
                1 
                ......
                &gt;&gt;&gt; next(my_generator)
                729
                &gt;&gt;&gt; next(my_generator)
                StopIteration error # A EVITER!

                # le boucle for les capture de base, nous devons le faire nous-meme
        
                    </code></pre>
            </section>


            <section>
            <h3>Set & Set Theory</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        
                # d'après la théorie des ensembles en maths
                # (SET THEORY), nous avons aussi le type set...
                &gt;&gt;&gt; my_set = {1, 2, 3, 4, 5}

                # la particularité de ce type est l'unicité des valeurs
                # ainsi que les caracteristiques se SET Theory:
                &gt;&gt;&gt; s1 = {1, 2, 3}
                &gt;&gt;&gt; s2 = {1, 2}
                &gt;&gt;&gt; s3 = {4, 5, 6}

                &gt;&gt;&gt; s2 &lt;= s1
                True # car s2 est un sous-ensemble de s1
                &gt;&gt;&gt; s2 &lt;= s3
                False # car s2 n'est pas un sous-ensemble de s3
        
                    </code></pre>
            </section>

        </section>


        <section>

            <section>

                <p>Comment organiser son code?</p>
            </section>


            <section>

                <p>Un module contient des elements que l'on veut inclure dans notre codebase:</p>
                <ul>
                    <li>fonctions</li>
                    <li>definitions</li>
                    <li>classes</li>
                    <li>constantes</li>
                </ul>

                <p>il existent 2 types de modules:</p>
                <ul>
                    <li>Custom modules - nos fichiers .py</li>
                    <li>Built-in modules - les modules natifs, qui aident à developper</li>
                </ul>
            </section>


            <section>
            <h3>Modules</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-5|7-19|22-30|32-38|40-42'>
        
        
                # importer un built-in module:
                import random

                &gt;&gt;&gt; random.randint(0, 10)
                8

                # Importer custom module.

                # DANS lib.py .....
                def func():
                    pass

                def other_func():
                    pass

                # DANS __main__.py .....
                import lib

                &gt;&gt;&gt; a = lib.func()


                # Nous pouvons aussi importer la fonction elle-même...
                from lib import other_func

                &gt;&gt;&gt; a = other_func()

                # ainsi que la renommer...
                import lib as thebestLIBever
                # ou alors
                from lib import other_func as the_best_f

                # ATTENTION - bonne pratique:
                    # évitez d'importer la fonction - importez le module.
                        # rend les sources du code clair.
    
                    # quand vous renommez le module avec AS
                    # verifiez quels sont les noms standards
                    # pour ce module.

                # Pour rendre des fonctions PRIVEES, ajoutez un _
                def _private_function():
                    pass
        
                    </code></pre>
            </section>


            <section>

                <h3>Package</h3>

                <p>Un package est une collection de modules. On peut donc
                    le considerer comme une librairie plus complète.</p>

                <p>La structure du package (dossier) est simple:</p>
                <ul>
                    <li>vos fichiers .py (modules)</li>
                    <li>un fichier __init__.py (souvent vide) pour declaration</li>
                </ul>
            </section>


            <section>

                <p>Structure d'un package - ici en bleu</p>

                <img src="./media/packageTree.png" alt="">

            </section>


            <section>
            <h3>Comment utiliser packages</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-7|9-22|24-30'>
        
        
                # Si on suit le format de l'image d'avant,
                # on peut importer ui_lib et le fichier window
                # depuis le __main__.py
                &gt;&gt;&gt; import ui_lib.window as wdw

                # si elle contient la fonction display()...
                &gt;&gt;&gt; wdw.display()

                # QUELQUES MODULES BUILT-IN importants:
                # (avec leur abbreviations type)
                import os # gestion appels système operationnel
                import math # gestion operations mathématiques 
                import sys # gestion appels système
                import datetime # gestion temporaire
                import random # gestion de l'aléatoire
                import json # JSON parsing et processing
                import itertools # outils gestion iteration
                import functools # outils prog. fonctionnelle
                import collections # collections avancées
                import typing # support typehints
                import abc # outils POO avancée
                ...

                # QUELQUES MODULES EXTERNES importants:
                # (avec leur abbreviations type)
                import numpy as np # gestions calculs matriciels
                import pandas as pd # gestions data processing
                import flask # serveur http
                import matplotlib # visualisation données
                ...




        
                    </code></pre>
            </section>

        </section>


        <section>

            <section>

                <p>Objets et Classes</p>
            </section>


            <section>

                <p>
                    Pourquoi utiliser classes?
                </p>
                <ul>
                    <li>cacher l'implementation (abstraction)</li>
                    <li>meilleure lisibilité de votre code</li>
                    <li>portabilité</li>
                    <li>extensibilité</li>
                    <li>maintenabilité</li>
                    <li>construction des comportements complexes</li>
                    <li>expression des concepts plus abstraits/réels</li>
                </ul>

                <p>quelle est la différence?</p>

                <ul>
                    <li><strong>Class</strong> - un "dessin" de l'objet</li>
                    <li><strong>Objet</strong> - une version crée à partir du "dessin"</li>
                </ul>



            </section>


            <section>
            <h3>Exemple pour commencer</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-11|13-20|22-25|26-37|39-52|54-56|58-71|73-80'>
        
        
                class Person:
                    def __init__(self, fname: str, age: int):
                        """CONSTRUCTEUR
        
                        Dicte comment un objet doit être construit.
        
                        self : mot clé designe appartenance à un objet
                        self._age : champ privé "_" propre à un objet
                        fname &amp; age : deux valeurs à stocker"""
                        self._fname = fname
                        self._age = age

                    @property
                    def fname(self) -&gt; str:
                        """GETTER
        
                        self : mot clé designe appartenance à un objet
                        self._fname : champ privé "_" propre à un objet 
                        @property : lazy-loading and readability"""
                        return self._fname

                    @property
                    def age(self) -&gt; int:
                        return self._age

                    def __str__(self) -&gt; str:
                        """Built-in method override

                        vue que tout en python est un objet, ils 
                        contiennent deja des comportements par défaut.
                        Il faut alors les "Override" - réecrire.

                        Là - le comportement de transformation en string.
        
                        self : mot clé designe appartenance à un objet"""
                        return f"Person(fname='{self.fname}', \
                                        age='{self.age}')"

                    def __eq__(self, other: Person) -&gt; bool:
                        """Built-in method override

                        vue que tout en python est un objet, ils 
                        contiennent deja des comportements par défaut.
                        Il faut alors les "Override" - réecrire.

                        Là - le comportement de comparaison.

                        self : mot clé designe appartenance à un objet"""
                        return (
                            self.fname == other.fname and 
                            self.age == other.age
                        )

                    def say_hi(self) -&gt; None:
                        """Custom method, proper to the object (self)"""
                        print(f"Hi! my name is {self.fname}!")

                    @classmethod
                    def calculate_age_difference_between(
                        cls, 
                        p1: Person, 
                        p2: Person
                    ):
                        """CLASS METHOD

                        methode qui n'apartient à aucun objet.
                        mais plutot a des classes.

                        au lieu de self, contient CLS comme argument. 
                        """
                        return abs(p1.age - p2.age)

                if __name__ == '__main__':
                    mike = Person("Mike", 27)
                    anna = Person(age=25, fname="Anna")

                    mike.say_hi()
                    anna.say_hi()

                    age_diff = Person.calculate_age_difference_between(mike, anna)

    
        
                    </code></pre>
            </section>


            <section>

                <p>3 piliers de la programmation orienté objet:</p>

                <ul>
                    <li>
                        <strong>Encapsulation</strong> - cacher des détails d'implémentation
                        <ul>
                            <li>champs privés - cohérence</li>
                            <li>on choisit quelles fonctionnalités nous exposons</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Héritage</strong> - Promouvoir réutilisation code.
                        <ul>
                            <li>Même si mauvaise pratique en général (faut pas abuser avec)</li>
                            <li>Utile pour creer familles et hierarchies...</li>
                        </ul>
                    </li>
                    <li><strong>Polymorphisme</strong> - Même objet peut prendre plusieurs formes</li>
                </ul>
            </section>


            <section>

                <p>Heritage</p>

                <ul>
                    <li>Nous permet de "generaliser" des traits/comportements</li>
                    <li>Crée un lien très fort entre des entités
                        <ul>
                            <li>faut faire attention lors de conception</li>
                            <li>prioritisez la composition! (prochain cours)</li>
                        </ul>
                    </li>
                </ul>
            </section>


            <section>
            <h3>Types de Generalisation</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-8|10-22|24-29|31-34'>
        
        
                # HERITAGE CLASSE (GENERALISATION)
                class Animal: pass

                class Dog( Animal ): pass

                class Cat( Animal ): pass

                class BengalCat( Cat ): pass

                # CLASSES ABSTRAITS / INTERFACES
                import abc

                class Communicates( abc.ABC ):
                    @abc.abstractmethod
                    def make_signal(self):
                        """a CONTRACT to be overwritten by the user"""
                        pass

                    @abc.abstractmethod
                    def receive_signal(self):
                        """a CONTRACT to be overwritten by the user"""
                        pass

                class MyBluetoothController( Communicates ):
                    def make_signal(self):  
                        ... # si on les overwrite pas, ca va pas compiler
    
                    def receive_signal(self):
                        ...

                # fonctionnalités importantes
                &gt;&gt;&gt; super() # evoque la classe parent
                &gt;&gt;&gt; isinstance() # verifie si un objet herite d'une classe
                &gt;&gt;&gt; 


        
                    </code></pre>
            </section>


            <section>
            <h3>Astuces Heritage</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers=''>
        
        
                # Quand une classe hétite d'une
                # autre, elle reprend ces caracteristiques...
                class Parent:
                    def __init__(self):
                        self.role = "parent"

                class Child( Parent ):
                    def __init__(self):
                        self.role = "child"

                &gt;&gt;&gt; p = Parent()
                &gt;&gt;&gt; c = Child()
                &gt;&gt;&gt; p.role
                "parent"
                &gt;&gt;&gt; c.role
                "child"

                # Observer ceci...
                class Parent:
                    def __init__(self):
                        self.role = "parent"

                class Child( Parent ):
                    pass

        
                    </code></pre>
            </section>

        </section>


        <section>

            <section>

                <p>Gestion du runtime</p>
            </section>


            <section>

                <p>Comment gerer les erreurs qui surviennent lors de l'execution (runtime)?</p>
            </section>

        </section>


        <section>

            <section>

                <p>Test-Driven Development</p>
            </section>


            <section>

                <div class="container">
                    <div class="col">
                        <p><small>C'est quoi?</small></p>
                        <ul>
                            <li>developpement piloté par les tests</li>
                            <li>nous testons des fonctionnalités au fur et à mésure</li>
                            <li>utilisant la librairie <strong>unittest</strong> ou autres</li>
                        </ul>
                    </div>
                    <div class="col">
                        <p><small>Pourquoi?</small></p>
                        <ul>
                            <li>nous force à planifier</li>
                            <li>encourage fonctions pures</li>
                            <li>si toutes les fonctions testées passent, il y aura pas de bugs</li>
                            <li>permet refactoring et ajout de code securisé
                                <ul>
                                    <li>assurance qu'on casse pas le produit existant</li>
                                    <li>si branché au deployement, on est sur que les produit safe</li>
                                    <li>un domaine de IT en soi!</li>
                                </ul>

                            </li>
                        </ul>
                    </div>
                </div>



            </section>


            <section>

                <p><small>les types de tests</small></p>

                <ul>
                    <li><strong>unitaires</strong>: ma fonction, marche-t-elle?</li>
                    <li><strong>modulaires</strong>: mon module (composé des fonctions), marche?</li>
                    <li><strong>operationnels</strong>: est-ce que l'API que je veux utiliser est dispo?</li>
                    <li><strong>securitaires</strong>: est-ce que ma sécurité est toujours en ordre?</li>
                    <li><strong>scenario</strong>: est-ce que toutes les interactions client passent?</li>
                </ul>

                <p><small>d'autres librairies existent, qui sont plus poussées.</small></p>
                <ul>
                    <li>PyTest (le meilleur)</li>
                    <li>DocTest</li>
                    <li>Nose 2</li>
                    <li>Testify</li>
                    <li>Robot</li>
                </ul>
                <p><small>complexité production large echelle, pour ce cours unittest</small></p>

            </section>


            <section>


                <p>? Ou placer mes fichiers test dans l'hierarchie?</p>
                <p><small>! à coté de votre MAIN, dans un dossier "tests" ou "validation" ou autre</small></p>

                <p><small>quelques règles:</small></p>
                <ul>
                    <li>chaque fichier avec des tests doit comporter le mot "test" au début
                        <ul>
                            <li>test_algebra.py</li>
                            <li>test_scenarios.py</li>
                            <li>test_hangman_functions.py</li>
                        </ul>
                    </li>
                    <li>chaque fonction test doit comporter le mot test au début
                        <ul>
                            <li>def test_function_sum(self):....</li>
                        </ul>
                    </li>
                    <li>ajoutez un __init__.py dans votre package des tests</li>
                    <li>" <strong>python3 -m unittest discover [votre dossier à tester]</strong> " pour lancer la découverte de tous les test unitaires</li>

                </ul>
            </section>


            <section>
            <h3>Comment utiliser unittest</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-3|4-9|11-21|23-32'>
        
        
                # premierement, il faut importer la librairie
                import unittest

                # on crée un classe de test..
                class MyCustomTests( unittest.TestCase ):

                    def setUp(self):
                        # pour initialiser nos ressources pour les tests
                        ... 

                    def test_function_sum(self):
                        a = 1 # variable locale
                        b = 2 # variable locale

                        # ce qu'on veut voir comme résultat
                        expected = sum(a + b) 
                        # ce qu'on a écrit
                        obtained = my_sum_fonction(a + b) 
        
                        # validation de résultat
                        self.assertEqual(expected, obtained) 
        
                    # plusieurs checks possibles...
                    - self.assertEqual(a, b)
                    - self.assertNotEqual(a, b)
                    - self.assertTrue(x)
                    - self.assertFalse(x)
                    - self.assertIs(a, b)
                    - self.assertIsNotNone(x)
                    - self.assertRaisesRegexp(exc, r, fun, args, *kwds)
                    - self.assertItemsEqual(a, b)
                    #  et d'autres...
        
                    </code></pre>
            </section>

        </section>


        <section>

            <section>

                <p>Flask</p>
            </section>


            <section>

                <p><small>
                    Flask est un micro framework web écrit en Python ;<br>
                    voici ses principales caractéristiques :
                </small></p>

                <ul>
                    <li>Ultra léger</li>
                    <li>Rapide à apprendre et à utiliser</li>
                    <li>
                        <strong>Dynamique :</strong><br>
                        <em>permet de créer des simples pages HTML et des REST API complexes</em>
                    </li>
                    <li>
                        <strong>Flexible :</strong><br>
                        <em>il peut être étendu via des librairies et des modules</em>
                    </li>
                    <li>Maintenu par une grande communauté de développeurs</li>
                </ul>
            </section>


            <section>

                <p><small>Qui utilise Flask ?</small></p>

                <ul>
                    <li>Netflix</li>
                    <li>Reddit</li>
                    <li>AirBnB</li>
                    <li>Lyft</li>
                    <li>Mozilla</li>
                    <li>Uber</li>
                    <li><em>Bientôt vous aussi</em></li>
                </ul>
            </section>


            <section>
            <h3>La mise en place</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-6|8-15'>
        
        
                '''Fichier "app.py" à la racine du projet'''
                # 1. On importe le module Flask
                import flask

                # 2. On déclare la variable globale pour l'application
                app = flask.Flask(__name__)

                # 3. On lance le serveur en mode dev pour avoir le debug
                &gt;&gt;&gt; export FLASK_ENV=development
                &gt;&gt;&gt; flask run

                # 3.b Si on utilise un fichier différent (hello.py) :
                &gt;&gt;&gt; export FLASK_ENV=development
                &gt;&gt;&gt; export FLASK_APP=hello
                &gt;&gt;&gt; flask run

        
                    </code></pre>
            </section>


            <section>
            <h3>Les routes</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='4-7|9-15|17-20|22-25|27-30'>
        
        
                import flask
                app = flask.Flask(__name__)

                # Une route est exposée par ce décorateur :
                @app.route('/endpoint', methods=['GET', 'POST'])
                def my_endpoint():
                    '''🤖'''

                # Si plusieurs routes doivent pointer vers le même output
                @app.route('/')
                @app.route('/home', methods=['GET', 'POST'])
                @app.route('/index')
                @app.route('/index-post', methods=['POST'])
                def home():
                    '''🤖'''

                # La route peut passer des arguments à la fonction
                @app.route('/books/&lt;title&gt;')
                def books(title):
                    '''🤖'''

                # ... préciser les types
                @app.route('/articles/&lt;int:year&gt;/&lt;int:month&gt;')
                def articles(year, month):
                    '''🤖'''

                # Et la fonction peut en définir les défauts
                @app.route('/reviews/&lt;int:year&gt;/&lt;int:month&gt;/&lt;str:title&gt;')
                def reviews(year=2021, month=12, title=None):
                    '''🤖'''

        
                    </code></pre>
            </section>


            <section>
            <h3>L'objet requête</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-3|7-17'>
        
        
                # Pour avoir accès au request object, on doit l'importer
                import flask
                from flask import request # 🆕

                app = flask.Flask(__name__)

                # Dans les routes on a acces au request object :
                @app.route('/endpoint')
                def endpoint():
                    request.method  # POST, GET, PUT, DELETE
                    request.args    # Les paramétres URL (?k=v)
                    request.headers # Les en-têtes de la requête

                    # Data reçues
                    request.form       # Le contenu du form (si submitted)
                    request.data       # Les data en format byte
                    request.get_json() # Les data lues depuis le JSON
    
        
                    </code></pre>
            </section>


            <section>
            <h3>Les réponses</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='6-17|19-29|31-38|40-41'>
        
        
                import flask
                app = flask.Flask(__name__)

                @app.route('/')
                def home():
                    # A. Gabarit HTML
                    html = flask.render_template(
                        'index.html',
                        title='Bienvenue sur ma page web !',
                        visits=10
                    )

                    response = flask.make_response(
                        html,                  # body
                        200,                   # status
                        {'X-Foo': 'blah blah'} # headers
                    )

                    # B. Réponse JSON
                    json = flask.jsonify({
                        'results': [1, 2, 3],
                        'error': None
                    })

                    response = flask.make_response(
                        json,                                 # body
                        200,                                  # status
                        {'Content-Type': 'application/json'}  # headers
                    )

                    # C. Rédirection
                    response = flask.redirect(
                        flask.url_for(
                            'dashboard', # Nom de la fonction
                            visits=11    # /?visits=11 || /&amp;#60;visits=11&amp;#62;
                        ),
                        code=302
                    )

                    # On retourne la réponse
                    return response
        
                    </code></pre>
            </section>


            <section>
                <p>C'est le temps de fabriquer quelque chose !</p>

                <p><small>Créez une application « squelettique » qui servira de base aux prochaines étapes.</small></p>
                <p><small>Cette application doit avoir les routes pour les opérations suivantes :</small></p>

                <ul>
                    <li>Enregistrer un article</li>
                    <li>Modifier un article</li>
                    <li>Lister tous les articles</li>
                </ul>

                <p><small>Pour les réponses, vous pouvez utiliser la méthode JSON et renvoyer des messages positifs pour les opérations effectuées, même si rien ne se passe réellement !</small></p>
            </section>


            <section>
            <h3>La gestion des erreurs</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='4-16'>
        
        
                import flask
                app = flask.Flask(__name__)

                '''
                Des réponses spécifiques peuvent être retournées
                dans le cas où une requête renvoie une erreur
                '''
                @app.errorhandler(404)
                def not_found():
                    '''🤖'''

                @app.errorhandler(400)
                def bad_request():
                    '''🤖'''

                @app.errorhandler(500)
                def server_error():
                    '''🤖'''
        
                    </code></pre>
            </section>


            <section>
                <p>Le plan du projet</p>

                <p><small>Jusqu'à présent, c'étaient les bases…
                <br>… c'est le moment de se compliquer la vie !
                <br>C'est ici que nous irons bientôt :</small></p>

                <pre>
                project/
                ├── __init__.py
                ├── database/
                │   ├── db.py
                │   └── schema.sql
                ├── routes/
                │   ├── auth.py
                │   └── articles.py
                ├── templates/
                │   ├── base.html
                │   ├── auth/
                │   │   ├── login.html
                │   │   └── register.html
                │   └── articles/
                │       ├── create.html
                │       ├── index.html
                │       └── update.html
                └── static/ style.css
                </pre>
            </section>


            <section>
            <h3>La fabrique de l'app</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-7|9-22'>
        
        
                # ./__init__.py

                import os
                import flask

                def create_app():
                    app = flask.Flask(__name__)

                    # Configuration de l'app
                    app.config.from_mapping(
                        SECRET_KEY='utilisée_pour_le_cryptage',
                        DATABASE=os.path.join(
                            app.instance_path,
                            'database',
                            'project.sqlite'
                        ) # Génère la path pour la BDD
                    )

                    # Ici on mettra nos routes
                    ...

                    return app
        
                    </code></pre>
            </section>


            <section>
            <h3>Le blueprint</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-11|14-20'>
        
        
                # ./routes/articles.py
                import flask
                blueprint = flask.Blueprint(
                    'articles',             # Nom
                    __name__,               # Nom pour l'import
                    url_prefix='/articles'
                )

                @blueprint.route('/new') # == '/articles/new'
                def new_article():
                    '''🤖'''


                # ./__init__.py
                def create_app():
                    ...
                    # On peut ajouter nos routes sous forme de blueprints
                    from routes import articles # 🆕
                    app.register_blueprint(articles.blueprint) # 🆕
                    ...
        
                    </code></pre>
            </section>


            <section>
                <p>C'est parti !
                <br><small>Reconvertissez la structure du projet</small></p>

                <p><small>Puis créez le blueprint "auth" avec les routes suivantes :</small></p>

                <ul>
                    <li>S'enregistrer</li>
                    <li>Effectuer le login</li>
                </ul>

                <p><small>Pour les réponses, vous pouvez utiliser la méthode JSON et renvoyer des messages positifs pour les opérations effectuées, même si rien ne se passe réellement !</small></p>
            </section>


            <section>
            <h3>La base de données</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-5|8-16|19-23|27-44|48-57|60-65|68-70|74-80'>
        
        
                #./database/db.py
                import sqlite3
                import click
                import flask
                from flask.cli import with_appcontext


                def get_db():
                    if 'db' not in flask.g: # "g" est la var de session
                        flask.g.db = sqlite3.connect(
                            flask.current_app.config['DATABASE'],
                            detect_types=sqlite3.PARSE_DECLTYPES
                        )
                        flask.g.db.row_factory = sqlite3.Row

                    return flask.g.db


                def close_db(e=None):
                    db = flask.g.pop('db', None) # Détache la BDD

                    if db is not None:
                        db.close()



                #./database/schema.sql
                DROP TABLE IF EXISTS user;
                DROP TABLE IF EXISTS article;

                CREATE TABLE user (
                  id INTEGER PRIMARY KEY AUTOINCREMENT,
                  username TEXT UNIQUE NOT NULL,
                  password TEXT NOT NULL
                );

                CREATE TABLE article (
                  id INTEGER PRIMARY KEY AUTOINCREMENT,
                  author_id INTEGER NOT NULL,
                  created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
                  title TEXT NOT NULL,
                  body TEXT NOT NULL,
                  FOREIGN KEY (author_id) REFERENCES user (id)
                );



                #./database/db.py
                def init_db():
                    db = get_db()

                    with flask.current_app.open_resource(
                        'database/schema.sql'
                    ) as schema:
                        db.executescript(
                            schema.read().decode('utf8')
                        )


                @click.command('init-db') # $ flask init-db
                @with_appcontext
                def init_db_command():
                    """Efface et récrée la BDD"""
                    init_db()
                    click.echo('BDD initialisée')


                def init_app(app):
                    app.teardown_appcontext(close_db)
                    app.cli.add_command(init_db_command)



                #./__init__.py
                def create_app():
                    ...
                    # On peut initialiser la BDD dans la factory
                    from database import db
                    db.init_app(app)
                    ...
        
                    </code></pre>
            </section>


            <section>
            <h3>Le gabarit HTML de base</h3>
            <pre><code class='language-html'             data-trim data-noescape             data-line-numbers='1|3-12|18-24|25-32|37-45'>
        
        
                &lt;!-- ./templates/base.html --&gt;
                &lt;!doctype html&gt;
                &lt;head&gt;
                  &lt;title&gt;{% block title %}{% endblock %} - Flaskr&lt;/title&gt;
                  &lt;link 
                    rel="stylesheet"
                    href="{{url_for(
                      'static',
                      filename='style.css'
                    ) }}"
                  &gt;
                &lt;/head&gt;

                &lt;body&gt;
                  &lt;nav&gt;
                    &lt;h1&gt;Flaskr&lt;/h1&gt;
                    &lt;ul&gt;
                      {% if g.user %}
                        &lt;li&gt;&lt;span&gt;
                          {{ g.user['username'] }}
                        &lt;/span&gt;&lt;/li&gt;
                        &lt;li&gt;&lt;a href="{{ url_for('auth.logout') }}"&gt;
                          Log Out
                        &lt;/a&gt;&lt;/li&gt;
                      {% else %}
                        &lt;li&gt;&lt;a href="{{ url_for('auth.register') }}"&gt;
                          Register
                        &lt;/a&gt;&lt;/li&gt;
                        &lt;li&gt;&lt;a href="{{ url_for('auth.login') }}"&gt;
                          Log In
                        &lt;/a&gt;&lt;/li&gt;
                      {% endif %}
                    &lt;/ul&gt;
                  &lt;/nav&gt;

                  &lt;section class="content"&gt;
                    &lt;header&gt;
                      {% block header %}{% endblock %}
                    &lt;/header&gt;

                    {% for message in get_flashed_messages() %}
                      &lt;div class="flash"&gt;{{ message }}&lt;/div&gt;
                    {% endfor %}

                    {% block content %}{% endblock %}
                  &lt;/section&gt;
                &lt;/body&gt;
        
                    </code></pre>
            </section>


            <section>
            <h3>Le formulaire d'enregistrement</h3>
            <pre><code class='language-html'             data-trim data-noescape             data-line-numbers='3|5-7|9-19'>
        
        
                &lt;!-- ./templates/auth/register.html --&gt;

                {% extends 'base.html' %}

                {% block header %}
                  &lt;h1&gt;{% block title %}Register{% endblock %}&lt;/h1&gt;
                {% endblock %}

                {% block content %}
                  &lt;form method="post"&gt;
                    &lt;label&gt;Username
                      &lt;input name="username" required&gt;
                    &lt;/label&gt;
                    &lt;label&gt;Password
                      &lt;input type="password" name="password" required&gt;
                    &lt;/label&gt;
                    &lt;input type="submit" value="Register"&gt;
                  &lt;/form&gt;
                {% endblock %}
        
                    </code></pre>
            </section>


            <section>
            <h3>Le formulaire de login</h3>
            <pre><code class='language-html'             data-trim data-noescape             data-line-numbers='3|5-7|9-19'>
        
        
                &lt;!-- ./templates/auth/login.html --&gt;

                {% extends 'base.html' %}

                {% block header %}
                  &lt;h1&gt;{% block title %}Log In{% endblock %}&lt;/h1&gt;
                {% endblock %}

                {% block content %}
                  &lt;form method="post"&gt;
                    &lt;label&gt;Username
                      &lt;input name="username" required&gt;
                    &lt;/label&gt;
                    &lt;label&gt;Password
                      &lt;input type="password" name="password" required&gt;
                    &lt;/label&gt;
                    &lt;input type="submit" value="Log In"&gt;
                  &lt;/form&gt;
                {% endblock %}
        
                    </code></pre>
            </section>


            <section>
            <h3>L'authentification</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-6|9-14|17-22|24-26|28-36|38-52|54-56|58-62|64-65|67-71|74-79|81-83|85-90|92-100|102-111|113-114|116-120|123-127|129-131|133-138|141-147|150-153|155-157|159-164|166-168|170-171|173-177|181-186'>
        
        
                # ./routes/auth.py
                import functools
                import flask
                from werkzeug import security

                from database.db import get_db


                # On déclare notre BP
                blueprint = flask.Blueprint(
                    'auth',
                    __name__,
                    url_prefix='/auth'
                )


                # Route pour le form d'enregistrement et son submit
                @blueprint.route('/register', methods=['GET', 'POST'])
                def register():

                    # Si "POST", il s'agit du submit
                    if flask.request.method == 'POST':
        
                        # 1. On récupère les data
                        username = flask.request.form['username']
                        password = flask.request.form['password']
        
                        # 2. On contrôle les data
                        error = None
                        if not username:
                            error = 'Le nom utilisateur est requis'
                        elif not password:
                            error = 'Le mot de passe est requis'

                        # On continue seulement si les data sont là
                        if error is None:

                            # 3. On ouvre la BDD et on enregistre l'user
                            db = get_db()
                            try:
                                db.execute(
                                    "INSERT INTO user\
                                        (username, password)\
                                        VALUES (?, ?)",
                                    (
                                        username,
                                        security.generate_password_hash(
                                            password
                                        )
                                    ),
                                )
                                db.commit()

                            # 3.b On ajoute une erreur si il existe déjà
                            except db.IntegrityError:
                                error = f"{username} existe déjà"

                            # 4. Si tout va bien, on révient au login
                            else:
                                return flask.redirect(
                                    flask.url_for("auth.login")
                                )

                        # 5. Sinon, on ajoute l'erreur au flash bag
                        flask.flash(error)

                    # On affiche le form si "GET"
                    # ou si on a des erreurs à afficher
                    return flask.render_template(
                        'auth/register.html'
                    )


                # Route pour le form de login et son submit
                @blueprint.route('/login', methods=['GET', 'POST'])
                def login():

                    # Si "POST", il s'agit du submit
                    if flask.request.method == 'POST':
            
                        # 1. On récupère les data
                        username = flask.request.form['username']
                        password = flask.request.form['password']

                        # 2. On ouvre la BDD et on cherche l'user
                        db = get_db()
                        user = db.execute(
                            'SELECT * FROM user WHERE username = ?',
                            (username,)
                        ).fetchone()

                        # 3. On contrôle les data
                        error = None
                        if (
                            user is None or not flask.check_password_hash(
                                user['password'],
                                password
                            )
                        ):
                            error = 'Identifiants non valides'

                        # 4. Si tout va bien, on nettoye la session,
                        # on enregistre l'user (id) en session
                        # et va à l'index
                        if error is None:
                            flask.session.clear()
                            flask.session['user_id'] = user['id']
            
                            return flask.redirect(
                                flask.url_for('index')
                            )

                        # 5. Sinon, on ajoute l'erreur au flash bag
                        flask.flash(error)
    
                    # On affiche le form si "GET"
                    # ou si on a des erreurs à afficher
                    return flask.render_template(
                        'auth/login.html'
                    )


                # On crée l'objet user pour chaque request
                @blueprint.before_app_request
                def load_logged_in_user():
                    # 1. On récupère l'ID depuis la session
                    user_id = flask.session.get('user_id')

                    # 2.a Si il n'existe pas, ce sera None
                    if user_id is None:
                        flask.g.user = None

                    # 2.b Si il existe, on le récupère depuis la BDD
                    else:
                        flask.g.user = get_db().execute(
                            'SELECT * FROM user WHERE id = ?',
                            (user_id,)
                        ).fetchone()


                # Au logout, on nettoye et on redirige
                @blueprint.route('/logout')
                def logout():
                    flask.session.clear()
                    return flask.redirect(
                        flask.url_for('index')
                    )


                # 🆕 Notre premier décorateur !
                # ici on en crée un pour protéger les pages

                def login_required(view):           # (view = la fonction)
    
                    @functools.wraps(view)          # On l'enveloppe
                    def wrapped_view(**kwargs):     # avec une function
                                                    # qui prend les kwargs

                        # Si la view est ouverte par un user
                        # non loggué, on le redirige ver le login
                        if flask.g.user is None:
                            return flask.redirect(
                                flask.url_for('auth.login')
                            )

                        # Sinon on lance la bonne fonction
                        # avec ses kwargs originaux
                        return view(**kwargs)

                    # On retourne la fonction enveloppée
                    return wrapped_view

                # Et voilà comment ce sera utilisé
                @blueprint.route('/profile')
                @login_required # 🆕
                def profile():
                    '''🤖'''



                # ./__init__.py
                def create_app():
                    ...
                    from routes import auth
                    app.register_blueprint(auth.blueprint)
                    ...
        
                    </code></pre>
            </section>


            <section>
                <p>C'est parti !
                <br><small>On remet la main à la pâte</small></p>

                <p><small>L'authentication</small></p>
                <ol>
                    <li>Ajoutez les fonctions d'auth</li>
                    <li>Ajoutez les templates HTML d'auth</li>
                    <li>Ajoutez le décorateur de protection aux views des articles</li>
                </ol>

                <p><small><em><a href="#/10/9">Structure du projet</a></em></small></p>
            </section>


            <section>
            <h3>La base de données II</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1-6|10-20|22-26|29-35|37-39|41-47|49-57|59-62|64-65|67-71|74-85|87-97|99-100|103-113|115-117|119-125|127-134|136-139|141-142|144-149|152-162|164-167'>
        
        
                # ./routes/articles.py
                import flask
                from werkzeug import exceptions

                from . import auth
                from database.db import get_db

                ...

                # La route pour afficher tous les articles
                @blueprint.route('/')
                def index():
                    db = get_db()
                    articles = db.execute(
                        'SELECT p.id, title, body, created,\
                            author_id, username'
                        ' FROM article p JOIN user u\
                            ON p.author_id = u.id'
                        ' ORDER BY created DESC'
                    ).fetchall()

                    # On affiche le template avec les articles
                    return flask.render_template(
                        'articles/index.html',
                        articles=articles
                    )


                # La route pour créer un nouvel article
                @blueprint.route('/create', methods=['GET', 'POST'])
                @auth.login_required
                def create():

                    # Si "POST", il s'agit du submit
                    if flask.request.method == 'POST':

                        # 1. On récupère les data
                        title = flask.request.form['title']
                        body = flask.request.form['body']
        
                        # 2. On contrôle les data
                        error = None
                        if not title:
                            error = 'Le titre est requis'

                        # On continue seulement si les data sont là
                        if error is None:

                            # 3. On ouvre la BDD et on enregistre l'art.
                            db = get_db()
                            db.execute(
                                'INSERT INTO article\
                                    (title, body, author_id)'
                                ' VALUES (?, ?, ?)',
                                (title, body, flask.g.user['id'])
                            )
                            db.commit()

                            # 4. Si tout va bien, on révient à la liste
                            return flask.redirect(
                                flask.url_for('articles.index')
                            )

                        # 5. Sinon, on ajoute l'erreur au flash bag
                        flask.flash(error)

                    # On affiche le form si "GET"
                    # ou si on a des erreurs à afficher
                    return flask.render_template(
                        'articles/create.html'
                    )


                # On crée un "helper" pour obtenir un article
                # Cela nous servira pour "update" et "delete"
                def get_article(id, check_author=True):
                    article = get_db().execute(
                        'SELECT\
                            p.id, title, body, created,\
                            author_id, username'
                        ' FROM article p JOIN user u\
                            ON p.author_id = u.id'
                        ' WHERE p.id=?',
                        (id,)
                    ).fetchone()

                    # On peut lever des erreurs HTTP
                    if article is None:
                        exceptions.abort(
                            404,
                            f"l'article {id} n'existe pas"
                        )
    
                    if check_author and (
                        article['author_id'] != flask.g.user['id']
                    ):
                        exceptions.abort(403)

                    # Si tout est ok, on retourne l'article
                    return article


                # La route pour mettre à jour un article
                @blueprint.route(
                    '/&lt;int:id&gt;/update',
                    methods=['GET', 'POST']
                )
                @auth.login_required
                def update(id):
                    article = get_article(id)

                    # Si "POST", il s'agit du submit
                    if flask.request.method == 'POST':

                        # 1. On récupère les data
                        title = flask.request.form['title']
                        body = flask.request.form['body']
        
                        # 2. On contrôle les data
                        error = None
                        if not title:
                            error = 'Title is required.'

                        # On continue seulement si les data sont là
                        if error is None:

                            # 3. On ouvre la BDD et on enregistre l'art.
                            db = get_db()
                            db.execute(
                                'UPDATE article SET title=?, body=?'
                                ' WHERE id=?',
                                (title, body, id)
                            )
                            db.commit()
            
                            # 4. Si tout va bien, on révient à la liste
                            return flask.redirect(
                                flask.url_for('articles.index')
                            )            

                        # 5. Sinon, on ajoute l'erreur au flash bag
                        flask.flash(error)

                    # On affiche le form si "GET"
                    # ou si on a des erreurs à afficher
                    return flask.render_template(
                        'articles/edit.html',
                        article=article
                    )


                # La route pour effacer un article
                @blueprint.route('/&lt;int:id&gt;/delete', methods=['POST'])
                @auth.login_required
                def delete(id):
                    get_article(id)
                    db = get_db()
                    db.execute(
                        'DELETE FROM article WHERE id=?',
                        (id,)
                    )
                    db.commit()

                    # On révient à la liste
                    return flask.redirect(
                        flask.url_for('articles.index')
                    )
        
                    </code></pre>
            </section>


            <section>
            <h3>La liste des articles</h3>
            <pre><code class='language-html'             data-trim data-noescape             data-line-numbers='1-2|4-12|14-16|18-24|25-33|36|39-43'>
        
        
                &lt;!-- ./templates/articles/index.html --&gt;
                {% extends 'base.html' %}

                {% block header %}
                  &lt;h1&gt;{% block title %}Articles{% endblock %}&lt;/h1&gt;
                  {% if g.user %}
                    &lt;a class="action"
                    href="{{ url_for('articles.create') }}"&gt;
                      Nouveau
                    &lt;/a&gt;
                  {% endif %}
                {% endblock %}

                {% block content %}
                  {% for article in articles %}
                    &lt;article class="article"&gt;
                      &lt;header&gt;
                        &lt;div&gt;
                          &lt;h1&gt;{{ article['title'] }}&lt;/h1&gt;
                          &lt;div class="about"&gt;
                            par {{ article['username'] }},
                            le {{article['created'].strftime('%Y-%m-%d')}}
                          &lt;/div&gt;
                        &lt;/div&gt;
                        {% if g.user['id'] == article['author_id'] %}
                          &lt;a class="action"
                          href="{{
                            url_for('articles.update',
                            id=article['id'])
                          }}"&gt;
                            Modifier
                          &lt;/a&gt;
                        {% endif %}
                      &lt;/header&gt;
      
                      &lt;p class="body"&gt;{{ article['body'] }}&lt;/p&gt;
                    &lt;/article&gt;
    
                    {% if not loop.last %}
                      &lt;hr&gt;
                    {% endif %}
                  {% endfor %}
                {% endblock %}
        
                    </code></pre>
            </section>


            <section>
            <h3>Le form de création</h3>
            <pre><code class='language-html'             data-trim data-noescape             data-line-numbers='1-2|4-6|8-9|10-14|16-20|22|23-24'>
        
        
                &lt;!-- ./templates/articles/create.html --&gt;
                {% extends 'base.html' %}

                {% block header %}
                  &lt;h1&gt;{% block title %}Nouvel article{% endblock %}&lt;/h1&gt;
                {% endblock %}

                {% block content %}
                  &lt;form method="post"&gt;
                    &lt;label&gt;Titre
                      &lt;input name="title"
                      value="{{ request.form['title'] }}"
                      required&gt;
                    &lt;/label&gt;
    
                    &lt;label&gt;Contenu
                      &lt;textarea name="body"&gt;
                        {{ request.form['body'] }}
                      &lt;/textarea&gt;
                    &lt;/label&gt;
    
                    &lt;input type="submit" value="Save"&gt;
                  &lt;/form&gt;
                {% endblock %}
        
                    </code></pre>
            </section>


            <section>
            <h3>La form de édition</h3>
            <pre><code class='language-html'             data-trim data-noescape             data-line-numbers='1-2|4-8|10-11|12-18|20-27|29|34-38|40-41|42-43'>
        
        
                &lt;!-- ./templates/articles/edit.html --&gt;
                {% extends 'base.html' %}

                {% block header %}
                  &lt;h1&gt;{% block title %}
                    Modifier "{{ article['title'] }}"
                  {% endblock %}&lt;/h1&gt;
                {% endblock %}

                {% block content %}
                  &lt;form method="post"&gt;
                    &lt;label&gt;Titre
                    &lt;input name="title"
                      value="{{
                        request.form['title']
                        or article['title']
                      }}" required&gt;
                    &lt;/label&gt;

                    &lt;label&gt;Contenu
                      &lt;textarea name="body"&gt;
                          {{
                            request.form['body']
                            or article['body']
                          }}
                        &lt;/textarea&gt;
                    &lt;/label&gt;

                    &lt;input type="submit" value="Save"&gt;
                  &lt;/form&gt;
  
                  &lt;hr&gt;

                  &lt;form action="{{
                      url_for(
                        'articles.delete',
                        id=article['id'])
                    }}" method="post"&gt;
    
                    &lt;input class="danger" type="submit" value="Delete"
                    onclick="return confirm('Vous êtes sûr ?');"&gt;
                  &lt;/form&gt;
                {% endblock %}
        
                    </code></pre>
            </section>


            <section>
                <p>C'est le tour des articles !</p>

                <p><small>Les articles</small></p>
                <ol>
                    <li>Ajoutez les fonctions des views des articles</li>
                    <li>Ajoutez les templates HTML pour les articles</li>
                </ol>

                <p><small><em><a href="#/10/9">Structure du projet</a></em></small></p>
            </section>

        </section>


        <section>

            <section>

                <p>Flask II</p>
            </section>


            <section>
            <h3>Les JSON Web Tokens</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1|5-17|21-27|30-35|38-40|42-45|47-52|54-65|67-75|77-82|85-89|90-95|97-105'>
        
        
                # $ pip install flask-jwt-extended



                # ./__init__.py
                ...
                import flask_jwt_extended as flask_jwt
                ...
                def create_app():
                    ...
                    app.config.from_mapping(
                        ...
                        JWT_SECRET_KEY='utilisée_pour_le_cryptage_jwt'
                        ...
                    )
                    jwt = flask_jwt.JWTManager(app)
                    ...



                # ./routes/api.py 🆕
                import flask
                from werkzeug import security

                import flask_jwt_extended as flask_jwt

                from database.db import get_db


                # On déclare le blueprint
                blueprint = flask.Blueprint(
                    'api',
                    __name__,
                    url_prefix='/api'
                )


                # Route pour le login
                @blueprint.route('/login', methods=['POST'])
                def login():

                    # 1. On récupère les data
                    request = flask.request.get_json()
                    username = request['username']
                    password = request['password']

                    # 2. On ouvre la BDD et on cherche l'user
                    db = get_db()
                    user = db.execute(
                        'SELECT * FROM user WHERE username = ?',
                        (username,)
                    ).fetchone()

                    # 3. On contrôle les data
                    # 3.a Identifiants non valides
                    if (
                        user is None or not flask.check_password_hash(
                            user['password'],
                            password
                        )
                    ):
                        response = flask.jsonify({
                            'error': 'Identifiants non valides'
                        })
                        code = 401
    
                    # 3.b Identifiants valides, on crée un JWT
                    else:
                        access_token = flask_jwt.create_access_token(
                            identity=user['id']
                        )
                        response = flask.jsonify({
                            'access_token': access_token
                        })
                        code = 200

                    # 4. On envoi la réponse
                    return flask.make_response(
                        response,
                        code,
                        {'Content-Type': 'application/json'}
                    )


                # Exemple de route protégée
                @blueprint.route('/protected')
                @flask_jwt.jwt_required() # On protège la route, notre
                def protected():          # requête devra avoir en header :
                                          # {Authorization: "Bearer $JWT"}
                    # 1. On récupère le user
                    user_id = flask_jwt.get_jwt_identity()
                    user = get_db().execute(
                        'SELECT * FROM user WHERE id = ?',
                        (user_id,)
                    ).fetchone()
    
                    # 2. Pour démo, on retourne le username
                    response = flask.jsonify({
                        'logged_in_as': user['username']
                    })
                    return flask.make_response(
                        response,
                        200,
                        {'Content-Type': 'application/json'}
                    )


        
                    </code></pre>
            </section>


            <section>
                <p>... Aïe aïe aïe...
                <br><small>nous avons deux problèmes très typiques</small></p>

                <ul>
                    <li>Les routes ont trop de responsabilités</li>
                    <li>Certains morceaux de code se répètent</li>
                </ul>

                <p><small>Il faut résoudre avant d'avoir une <strong>machine de Goldberg !</strong>
                <br>Essayez de mettre toute la logique dans des fonctions réutilisables.
                <br>Les routes ne doivent contenir que des routes !
                <br>Vous devrez arriver à réorganiser le tout comme ça :</small></p>

                <pre>
                project/
                ├── services/
                │   ├── auth.py (vérifier, chercher, encrypter, etc...)
                │   └── database/
                │       ├── db.py (chercher, modifier, effacer, etc...)
                │       └── schema.sql
                ├── routes/
                │   ├── auth.py
                │   └── articles.py
                ...
                </pre>
            </section>


            <section>
            <h3>Le fichier .env</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1|5-9|13-16|18-27'>
        
        
                # $ pip install python-dotenv



                # ./.env 🆕 (à ajouter au .gitignore)

                SECRET_KEY='utilisée_pour_le_cryptage'
                JWT_SECRET_KEY='utilisée_pour_le_cryptage_jwt'
                ENV='development'



                # ./__init__.py
                ...
                import os
                from dotenv import load_dotenv

                def create_app():
                    load_dotenv()
                    ...
                    app.config.from_mapping(
                        ENV=os.getenv('ENV'),
                        SECRET_KEY=os.getenv('SECRET_KEY'),
                        JWT_SECRET_KEY=os.getenv('JWT_SECRET_KEY'),
                        ...
                    )
                    ...
        
                    </code></pre>
            </section>


            <section>
            <h3>Rendre l'app installable</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1|5|8-19|23-29|33-37'>
        
        
                # ./setup.py



                from setuptools import find_packages, setup


                setup(
                    name='project',
                    version='1.0.0',
                    packages=find_packages(),
                    include_package_data=True,
                    zip_safe=False,
                    install_requires=[
                        'flask',
                        'python-dotenv',
                        'flask-jwt-extended'
                    ],
                )



                # ./MANIFEST.in
                # Ici on déclare les fichiers
                # statiques à importer
                include services/database/schema.sql
                graft static
                graft templates
                global-exclude *.pyc



                # On installe, global ou env
                # $ pip install -e .

                # Maintenant, flask run fonctionne
                # partout dans la machine
        
                    </code></pre>
            </section>


            <section>
            <h3>Les emails de confirmation</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1|5-14|18-20|22-25|27-33|35-36|40-47|51-53|56-58|60-63|65-69|72-74|76-79|81-87|89-91|93-94|98-99|102-106|108-109|111-115|117-122|124-128|130-137|139-142|144-147|150-155|157-160|162-167|169-173|175-176|178-179|181-186'>
        
        
                # $ pip install Flask-Mail



                # ./__init__.py
                ...
                def create_app():
                    ...
                    app.config.from_mapping(
                        ...
                        MAIL_DEFAULT_SENDER='gatekeeper@website.web'
                        SECURITY_PASSWORD_SALT='utilisée_pour_le_cryptage_token'
                        ...
                    )



                # ./services/email.py 🆕
                import flask
                import flask_mail

                # On crée un helper pour envoyer les emails
                def send_email(to, subject, body):
                    app = flask.current_app
                    mail = flask_mail.Mail(app)
    
                    # 1. On compose le message avec les args
                    message = flask_mail.Message(
                        subject,
                        recipients=[to],
                        html=body,
                        sender=app.config['MAIL_DEFAULT_SENDER']
                    )
    
                    # On envoie le message
                    mail.send(message)



                #./services/database/schema.sql
                # On met à jour le schema SQL
                ...
                CREATE TABLE user (
                  ...
                  email TEXT UNIQUE NOT NULL,
                  confirmed INTEGER(1) DEFAULT 0
                );



                #./services/auth.py
                import flask
                from itsdangerous import URLSafeTimedSerializer


                # On crée un helper pour générer les tokens
                def generate_confirmation_token(email):
                    app = flask.current_app

                    # 1. On initialise le serializer
                    serializer = URLSafeTimedSerializer(
                        app.config['SECRET_KEY']
                    )
    
                    # 2. On encrypte l'email
                    return serializer.dumps(
                        email,
                        salt=app.config['SECURITY_PASSWORD_SALT']
                    )


                # On crée un helper pour confirmer les tokens 
                def confirm_token(token, expiration=3600):
                    app = flask.current_app

                    # 1. On initialise le serializer
                    serializer = URLSafeTimedSerializer(
                        app.config['SECRET_KEY']
                    )
    
                    # 2. On essaye de décrypter
                    try:
                        email = serializer.loads(
                            token,
                            salt=app.config['SECURITY_PASSWORD_SALT'],
                            max_age=expiration
                        )
    
                    # 3.a On retourne False en cas de échec
                    except:
                        return False
    
                    # 3.b Si tout va bien, on retourne l'email
                    return email



                #./routes/auth.py
                from services import email


                # Route pour vérifier un token
                @blueprint.route('/confirm/&lt;token&gt;')
                @auth.login_required
                def confirm_token(token):
                    db = get_db()

                    # 1. On essaye de décrypter
                    email = auth.confirm_token(token)

                    # 2.a En cas d'echéc
                    if not email:
                        flask.flash(
                            'Le lien de confirmation est invalide ou a expiré'
                        )

                    # 2.b En cas de succés
                    else:
                        user = db.execute(
                            'SELECT * FROM user WHERE email=?',
                            (email,)
                        ).fetchone()
        
                        # 3.a Si l'user est confirmé déjà
                        if user.confirmed:
                            flask.flash(
                                'Compte déjà confirmé. Veuillez vous connecter.'
                            )
        
                        # 3.b Tout va bien, on met à jour et on remercie
                        else:
                            db.execute(
                                'UPDATE user SET confirmed=1'
                                ' WHERE id=?',
                                (user['id'],)
                            )
                            db.commit()
            
                            flask.flash(
                                'You have confirmed your account. Thanks!',
                                'success'
                            )
    
                    # En tout cas, on redirige vers le login
                    return flask.redirect(
                        flask.url_for('auth.login')
                    )


                # On met à jour la route d'enregistrement
                @blueprint.route('/register', methods=['GET', 'POST'])
                def register():
                    ...
                    # Dans l'étape 4.
                    else:
                        # 1. On crée un token
                        token = auth.generate_confirmation_token(
                            email
                        )

                        # 2. On crée le URL de confirmation
                        confirm_url = flask.url_for(
                            'auth.confirm_email',
                            token=token,
                            _external=True
                        )

                        # 3. On crée un message
                        email_body = f'''
                            &lt;p&gt;Veuillez suivre ce lien pour activer votre compte :&lt;/p&gt;
                            &lt;p&gt;&lt;a href="{confirm_url}"&gt;{confirm_url}&lt;/a&gt;&lt;/p&gt;
                        '''

                        # 4. On ajoute un objet
                        subject = 'Veuillez confirmer votre email'

                        # 5. On enoie l'email
                        email.send_email(email, subject, email_body)

                        # 6. On communique au front end
                        flask.flash(
                            'A confirmation email has been sent via email',
                            'success'
                        )
                        ...
        
                    </code></pre>
            </section>


            <section>
            <h3>Le ORM SQLAlchemy</h3>
            <pre><code class='language-python'             data-trim data-noescape             data-line-numbers='1|5-13|16-17|20-33|37-44|47-55|58-65|67-76|78-86|88-96|98-107'>
        
        
                # $ pip install sqlalchemy



                # ./services/database/db.py
                import os

                from dotenv import load_dotenv
                from sqlalchemy import create_engine
                from sqlalchemy.orm import sessionmaker
                from sqlalchemy.ext.declarative import declarative_base

                load_dotenv()


                # On déclare le type de DB
                Base = declarative_base()


                # On crée l'helper pour les sessions DB
                def create_session(engine=None):
                    engine = create_engine(
                        engine
                        or os.getenv('DB_ENGINE')
                        # f"sqlite:///{db_path}"
                    )
    
                    Base.metadata.create_all(engine)
                    Base.metadata.bind = engine

                    Session = sessionmaker(bind=engine)
    
                    return Session



                #  ./classes/user
                from dataclasses import dataclass
                from sqlalchemy import Column as ORMColumn
                from sqlalchemy import String as ORMString
                from sqlalchemy import Integer as ORMInteger
                from sqlalchemy import Boolean as ORMBoolean

                from services.database import db


                # On déclare le schema pour les utilisateurs
                class UserRow(db.Base):
                    __tablename__ = 'user'

                    id = ORMColumn(ORMInteger, primary_key=True)
                    username = ORMColumn(ORMString, nullable=False)
                    password = ORMColumn(ORMString, nullable=False)
                    email = ORMColumn(ORMString, nullable=False)
                    confirmed = ORMColumn(ORMBoolean, default=False)


                # On crée une dataclass pour les utilisateurs
                @dataclass
                class User:
                    id:int
                    username:str
                    password:str
                    email:str
                    confirmed:bool

                    # Méthode pour avoir un User depuis la DB
                    @classmethod
                    def from_row(cls, row:UserRow):
                        return User(
                            id=row.id,
                            username=row.username,
                            password=row.password,
                            email=row.email,
                            confirmed=row.confirmed
                        )
    
                    # ... et pour l'avoir avec juste l'id
                    @classmethod
                    def from_row_id(cls, id:int):
                        with db.create_session().begin() as db_session:
                            user_row = db_session.query(UserRow).get(id)
                            user = User.from_row(user_row)
                            db_session.close()
        
                        return user
    
                    # Méthode pour convertir un User pour la DB
                    def to_row(self) -&gt; UserRow:
                        return UserRow(
                            id=self.id,
                            username=self.username,
                            password=self.password,
                            email=self.email,
                            confirmed=self.confirmed
                        )
    
                    # ... et pour l'enregistrer
                    def store_row(self) -&gt; int:
                        user_row = self.to_row()

                        with db.create_session().begin() as db_session:
                            db_session.add(user_row)
                            db_session.flush()
                            id = user_row.id
        
                        return id
        
                    </code></pre>
            </section>


            <section>
                <p>Et ben, mainteant c'est à vous !</p>

                <p><small>Vous pouvez vous lancer dans le wrappin' up de ce cours pour créer votre base de développement Flask.</small></p>

                <p><small>Maintenant, comme promis, une liste de ressources pour votre décollage avec Flask :

                    <br><a href="https://pythonhosted.org/Flask-Mail/">Flask Mail</a>
                    <br><a href="https://flask-jwt-extended.readthedocs.io/en/stable/">Flask JWT extended</a>
                    <br><a href="https://docs.sqlalchemy.org/14/orm/tutorial.html">SQLAlchemy</a>
                    <br><a href="https://flask.palletsprojects.com/en/2.0.x/deploying/">Flask deploy</a></small></p>


                <p><small>Pour des projets suuuuuuper complexes :

                    <br><a href="https://python-telegram-bot.readthedocs.io/en/stable/">Python + Telegram</a>
                    <br><a href="https://flask-socketio.readthedocs.io/en/latest/">Flask-SocketIO</a>
                    <br><a href="https://docs.celeryproject.org/en/stable/index.html">Celery</a>
                    <br><a href="https://flower.readthedocs.io/">Flower (Celery monitor)</a>
                    <br><a href="https://github.com/miguelgrinberg/flask-celery-example">Celery + Flask</a>
                    <br><a href="https://scrapy.org/">Scrapy</a>
                    <br><a href="https://codeburst.io/running-scrapy-in-celery-tasks-d81e159921ea">Scrapy + Celery</a>
                    <br><a href="https://github.com/clemfromspace/scrapy-selenium">Scrapy + Selenium</a></small></p>
            </section>

        </section>


        <section>

            <section>

                <p>Bases de Données et SQLAlchemy</p>
            </section>


            <section>

                <p><small>Base de données?</small></p>
                <ul>
                    <li><strong>C'est quoi? </strong>lieu de stockage de données</li>
                    <li><strong>Comment? </strong>Engin de gestion de données</li>
                    <li><strong>Examples? </strong>
                    <ul>
                        <li>MySQL</li>
                        <li>PostgreSQL</li>
                        <li>Oracle</li>
                        <li>Microsoft SQL Server</li>
                        <li>SQLite</li>
                        <li>ElasticSearch</li>
                        <li>Google Firebase</li>
                        <li>.txt</li>
                        <li>.json</li>
                        <li>Excel</li>
                        <li>...</li>
                    </ul></li>
                </ul>
            </section>


            <section>

                <p><small>Types de Bases de données?</small></p>

                <ul>
                    <li><strong>Normalisées: </strong>pas de redondances dans la structure
                    <ul>
                        <li>Rapides</li>
                        <li>Plus difficiles de concevoir</li>
                        <li>Efficaces</li>
                    </ul></li>

                    <li><strong>Denormalisées: </strong>redondances dans la structure
                        <ul>
                            <li>Plus lentes</li>
                            <li>Flexibilité</li>
                            <li>Autres Use Cases</li>
                        </ul></li>
    

                </ul>

            </section>


            <section>

                <p><small>SQL est un language de requête pour interagir avec une base de données NORMALISEE qui le supporte</small></p>

                <ul>
                    <li>MySQL</li>
                    <li>PostgreSQL</li>
                    <li>Oracle</li>
                    <li>Microsoft SQL Server</li>
                    <li>SQLite</li>
                </ul>

                <p><small>exemple:</small></p>
                <p><small>SELECT nom_du_champ FROM nom_du_tableau </small></p>
            </section>


            <section>

                <p><small>Comment allons-nous travailler avec?</small></p>
                <ul>
                    <li>librairies comme sqlite3 et mysql
                        <ul>
                            <li>pas très portable car injection des requetes</li>
                            <li>code peu lisible</li>
                            <li>pour rendre lisible, besoin d'une quantité ENORME des classes/fonctions</li>
                            <li>parfait pour des petites applications</li>
                        </ul>
                    </li>
                    <li>utiliser un ORM, comme SQLAlchemy
                        <ul>
                            <li>ORM - Object Relational Mapping
                                <ul>
                                    <li>Permet de faire abstraction des langages de requête SQL</li>
                                    <li>et penser purement en termes de Python</li>
                                </ul>
                            </li>
                            <li>extensible</li>
                            <li>utilise la meme logique que nous avons vu dans les classes et objets pour representer des tables, lignes et champs</li>
                        </ul>
                    </li>
                </ul>

                <p><small>NOTE: utilisez pas une base de données si vous en avez pas besoin... un fichier JSON ou excel ou meme txt est un choix valable! C'est pas gênant!</small></p>
            </section>

        </section>


        <section>

            <section>

                <p>Outils d'analyse de données</p>


            </section>


            <section>

                <p><small>Outils d'analyse de données spécialisées:</small></p>

                <ul>
                    <li><strong>import matplotlib as plt</strong><ul>
                        <li>Dessin des courbes</li>
                        <li>Dessin des figures géometriques</li>
                        <li>Presentation proffessionnelle</li>
                        <li>exportable en .png et leger</li>
                    </ul></li>
                    <li><strong>import numpy as np</strong><ul>
                        <li>Calculs vectoriels</li>
                        <li>Evite des comprehensions des listes.</li>
                        <li>un peu plus lent sur .append()</li>
                        <li>BEAUCOUP plus rapide avec des opérations vectorielles <ul>
                            <li>VECTORIZATION DU CODE: adaptation de votre code pour tirer profit de la nature rapide de numpy</li>
                        </ul></li>
                    </ul></li>  
                    <li><strong>import pandas as pd</strong><ul>
                        <li>construit sur numpy</li>
                        <li>permet le chainage des methodes</li>
                        <li>l'outil go-to pour analyser des données</li>
                    </ul></li>  
                </ul>


            </section>

        </section>

    </div>
    	</div>
        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/
            Reveal.initialize({
                hash: true,
                parallaxBackgroundImage: 'https://background-tiles.com/overview/black/patterns/large/1035.png',
                parallaxBackgroundSize: '300px 300px',
                parallaxBackgroundHorizontal: 200,
                parallaxBackgroundVertical: 50,

                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
            });
        </script>
    </body>
</html>